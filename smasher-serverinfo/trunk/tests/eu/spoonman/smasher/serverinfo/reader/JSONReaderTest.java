/*
 * This file is part of Smasher.
 * Copyright 2008, 2009 Tomasz 'SpOOnman' Kalkosi≈Ñski <spoonman@op.pl>
 * 
 * Smasher is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 * 
 * Smasher is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 * 
 * You should have received a copy of the GNU General Public License
 * along with Smasher.  If not, see <http://www.gnu.org/licenses/>.
 */

package eu.spoonman.smasher.serverinfo.reader;

import static org.junit.Assert.*;

import org.junit.Test;

import eu.spoonman.smasher.serverinfo.ServerInfo;

public class JSONReaderTest {
    
    private final String responseCTF = "{\"MOST_KILLS\":{\"PLAYER_TEAM\":\"Blue\",\"PLAYER_NICK\":\"Napastnik\",\"PLAYER_ID\":2187513,\"PLAYER_MODEL\":\"bones_bones\",\"PLAYER_COUNTRY\":\"PL\",\"NUM\":21},\"NUM_PLAYERS\":15,\"TOTAL_CAPTURES\":14,\"GAME_LENGTH\":482,\"BLUE_SCOREBOARD\":[{\"MG\":0,\"BFG\":0,\"NG_A\":0,\"DEATHS\":6,\"PM\":0,\"GT_A\":0,\"GT\":0,\"PLAYER_NICK\":\"LS1942\",\"RG\":0,\"PG\":0,\"MIN\":482,\"CG_A\":0,\"GL\":0,\"DEFENDS\":6,\"PLAYER_COUNTRY\":\"PL\",\"ACCURACY\":21,\"SG_A\":0,\"RL_A\":27,\"TEAM\":\"Blue\",\"TEAM_RANK\":1,\"PLAYER_ID\":1840680,\"LG_A\":0,\"KILLS\":11,\"ASSISTS\":1,\"CG\":0,\"NG\":0,\"RANK\":1,\"PM_A\":0,\"GL_A\":0,\"BFG_A\":0,\"PLAYER_MODEL\":\"klesk_flisk\",\"PG_A\":0,\"CAPTURES\":5,\"RL\":0,\"MG_A\":13,\"SCORE\":804,\"SG\":0,\"RG_A\":14,\"LG\":0},{\"MG\":0,\"NG_A\":0,\"BFG\":0,\"DEATHS\":14,\"PM\":0,\"GT_A\":0,\"GT\":0,\"MIN\":482,\"PG\":0,\"RG\":0,\"PLAYER_NICK\":\"Napastnik\",\"CG_A\":0,\"GL\":0,\"DEFENDS\":11,\"PLAYER_COUNTRY\":\"PL\",\"ACCURACY\":19,\"SG_A\":66,\"RL_A\":64,\"TEAM\":\"Blue\",\"TEAM_RANK\":2,\"PLAYER_ID\":2187513,\"LG_A\":0,\"KILLS\":21,\"ASSISTS\":2,\"CG\":0,\"NG\":0,\"RANK\":2,\"BFG_A\":0,\"GL_A\":0,\"PM_A\":0,\"PLAYER_MODEL\":\"bones_bones\",\"RL\":0,\"CAPTURES\":1,\"PG_A\":10,\"SCORE\":639,\"MG_A\":17,\"RG_A\":52,\"SG\":0,\"LG\":0},{\"MG\":0,\"BFG\":0,\"NG_A\":0,\"DEATHS\":11,\"PM\":0,\"GT_A\":0,\"GT\":0,\"PLAYER_NICK\":\"Legend4ry\",\"RG\":0,\"PG\":0,\"MIN\":482,\"CG_A\":0,\"GL\":0,\"DEFENDS\":12,\"PLAYER_COUNTRY\":\"GB\",\"ACCURACY\":31,\"SG_A\":71,\"RL_A\":43,\"TEAM\":\"Blue\",\"TEAM_RANK\":3,\"PLAYER_ID\":1836336,\"LG_A\":0,\"KILLS\":16,\"ASSISTS\":3,\"CG\":0,\"NG\":0,\"RANK\":3,\"PM_A\":0,\"GL_A\":0,\"BFG_A\":0,\"PLAYER_MODEL\":\"keel_sport\",\"PG_A\":7,\"CAPTURES\":1,\"RL\":0,\"MG_A\":28,\"SCORE\":571,\"SG\":0,\"RG_A\":42,\"LG\":0},{\"MG\":0,\"NG_A\":0,\"BFG\":0,\"DEATHS\":12,\"PM\":0,\"GT_A\":0,\"GT\":0,\"MIN\":347,\"PG\":0,\"RG\":0,\"PLAYER_NICK\":\"Superi1337\",\"CG_A\":0,\"GL\":0,\"DEFENDS\":6,\"PLAYER_COUNTRY\":\"FI\",\"ACCURACY\":20,\"SG_A\":100,\"RL_A\":42,\"TEAM\":\"Blue\",\"TEAM_RANK\":4,\"PLAYER_ID\":1470739,\"LG_A\":0,\"KILLS\":10,\"ASSISTS\":1,\"CG\":0,\"NG\":0,\"RANK\":7,\"BFG_A\":0,\"GL_A\":0,\"PM_A\":0,\"PLAYER_MODEL\":\"klesk_flisk\",\"RL\":0,\"CAPTURES\":1,\"PG_A\":18,\"SCORE\":400,\"MG_A\":18,\"RG_A\":37,\"SG\":0,\"LG\":0},{\"MG\":0,\"BFG\":0,\"NG_A\":0,\"DEATHS\":4,\"PM\":0,\"GT_A\":0,\"GT\":0,\"PLAYER_NICK\":\"Cychu666\",\"RG\":0,\"PG\":0,\"MIN\":261,\"CG_A\":0,\"GL\":0,\"DEFENDS\":6,\"PLAYER_COUNTRY\":\"PL\",\"ACCURACY\":24,\"SG_A\":37,\"RL_A\":43,\"TEAM\":\"Blue\",\"TEAM_RANK\":5,\"PLAYER_ID\":2050125,\"LG_A\":0,\"KILLS\":9,\"ASSISTS\":1,\"CG\":0,\"NG\":0,\"RANK\":8,\"PM_A\":0,\"GL_A\":0,\"BFG_A\":0,\"PLAYER_MODEL\":\"anarki_default\",\"PG_A\":15,\"CAPTURES\":0,\"RL\":0,\"MG_A\":21,\"SCORE\":183,\"SG\":0,\"RG_A\":38,\"LG\":0},{\"MG\":0,\"NG_A\":0,\"BFG\":0,\"DEATHS\":1,\"PM\":0,\"GT_A\":0,\"GT\":0,\"MIN\":63,\"PG\":0,\"RG\":0,\"PLAYER_NICK\":\"acuratebob\",\"CG_A\":0,\"GL\":0,\"DEFENDS\":0,\"PLAYER_COUNTRY\":\"GB\",\"ACCURACY\":16,\"SG_A\":0,\"RL_A\":0,\"TEAM\":\"Blue\",\"TEAM_RANK\":6,\"PLAYER_ID\":2378331,\"LG_A\":0,\"KILLS\":1,\"ASSISTS\":0,\"CG\":0,\"NG\":0,\"RANK\":12,\"BFG_A\":0,\"GL_A\":0,\"PM_A\":0,\"PLAYER_MODEL\":\"razor_id\",\"RL\":0,\"CAPTURES\":0,\"PG_A\":0,\"SCORE\":46,\"MG_A\":14,\"RG_A\":33,\"SG\":0,\"LG\":0},{\"MG\":0,\"BFG\":0,\"NG_A\":0,\"DEATHS\":0,\"PM\":0,\"GT_A\":0,\"GT\":0,\"PG\":0,\"MIN\":0,\"RG\":0,\"PLAYER_NICK\":\"QUITTERS\",\"CG_A\":0,\"GL\":0,\"DEFENDS\":0,\"ACCURACY\":\"N/A\",\"SG_A\":0,\"RL_A\":0,\"TEAM_RANK\":\"Q\",\"PLAYER_ID\":0,\"LG_A\":0,\"KILLS\":0,\"ASSISTS\":0,\"CG\":0,\"NG\":0,\"RANK\":\"Q\",\"PM_A\":0,\"BFG_A\":0,\"GL_A\":0,\"PG_A\":0,\"CAPTURES\":0,\"RL\":0,\"MG_A\":0,\"SCORE\":0,\"SG\":0,\"RG_A\":0,\"LG\":0}],\"GAME_TYPE_FULL\":\"Capture The Flag\",\"TOTAL_KILLS\":107,\"INSTAGIB\":0,\"RED_SCOREBOARD\":[{\"MG\":0,\"NG_A\":0,\"BFG\":0,\"DEATHS\":18,\"PM\":0,\"GT_A\":0,\"GT\":0,\"MIN\":482,\"PG\":0,\"RG\":0,\"PLAYER_NICK\":\"terraNivium\",\"CG_A\":0,\"GL\":0,\"DEFENDS\":10,\"PLAYER_COUNTRY\":\"GB\",\"ACCURACY\":27,\"SG_A\":66,\"RL_A\":42,\"TEAM\":\"Red\",\"TEAM_RANK\":1,\"PLAYER_ID\":1531394,\"LG_A\":0,\"KILLS\":17,\"ASSISTS\":3,\"CG\":0,\"NG\":0,\"RANK\":4,\"BFG_A\":0,\"GL_A\":0,\"PM_A\":0,\"PLAYER_MODEL\":\"sarge_default\",\"RL\":0,\"CAPTURES\":1,\"PG_A\":3,\"SCORE\":553,\"MG_A\":25,\"RG_A\":38,\"SG\":0,\"LG\":0},{\"MG\":0,\"BFG\":0,\"NG_A\":0,\"DEATHS\":11,\"PM\":0,\"GT_A\":0,\"GT\":0,\"PLAYER_NICK\":\"kizug\",\"RG\":0,\"PG\":0,\"MIN\":482,\"CG_A\":0,\"GL\":0,\"DEFENDS\":3,\"PLAYER_COUNTRY\":\"PL\",\"ACCURACY\":7,\"SG_A\":20,\"RL_A\":23,\"TEAM\":\"Red\",\"TEAM_RANK\":2,\"PLAYER_ID\":2253443,\"LG_A\":0,\"KILLS\":6,\"ASSISTS\":2,\"CG\":0,\"NG\":0,\"RANK\":5,\"PM_A\":0,\"GL_A\":0,\"BFG_A\":0,\"PLAYER_MODEL\":\"anarki_default\",\"PG_A\":6,\"CAPTURES\":2,\"RL\":0,\"MG_A\":5,\"SCORE\":493,\"SG\":0,\"RG_A\":0,\"LG\":0},{\"MG\":0,\"NG_A\":0,\"BFG\":0,\"DEATHS\":11,\"PM\":0,\"GT_A\":0,\"GT\":0,\"MIN\":336,\"PG\":0,\"RG\":0,\"PLAYER_NICK\":\"Zombinyuszi\",\"CG_A\":0,\"GL\":0,\"DEFENDS\":5,\"PLAYER_COUNTRY\":\"HU\",\"ACCURACY\":10,\"SG_A\":50,\"RL_A\":20,\"TEAM\":\"Red\",\"TEAM_RANK\":3,\"PLAYER_ID\":1858607,\"LG_A\":0,\"KILLS\":5,\"ASSISTS\":1,\"CG\":0,\"NG\":0,\"RANK\":6,\"BFG_A\":0,\"GL_A\":0,\"PM_A\":0,\"PLAYER_MODEL\":\"visor_gorre\",\"RL\":0,\"CAPTURES\":3,\"PG_A\":8,\"SCORE\":444,\"MG_A\":12,\"RG_A\":0,\"SG\":0,\"LG\":0},{\"MG\":0,\"BFG\":0,\"NG_A\":0,\"DEATHS\":10,\"PM\":0,\"GT_A\":0,\"GT\":0,\"PLAYER_NICK\":\"majortony\",\"RG\":0,\"PG\":0,\"MIN\":257,\"CG_A\":0,\"GL\":0,\"DEFENDS\":4,\"PLAYER_COUNTRY\":\"GB\",\"ACCURACY\":11,\"SG_A\":0,\"RL_A\":16,\"TEAM\":\"Red\",\"TEAM_RANK\":4,\"PLAYER_ID\":2588330,\"LG_A\":0,\"KILLS\":4,\"ASSISTS\":0,\"CG\":0,\"NG\":0,\"RANK\":9,\"PM_A\":0,\"GL_A\":0,\"BFG_A\":0,\"PLAYER_MODEL\":\"orbb_default\",\"PG_A\":11,\"CAPTURES\":0,\"RL\":0,\"MG_A\":11,\"SCORE\":151,\"SG\":0,\"RG_A\":0,\"LG\":0},{\"MG\":0,\"NG_A\":0,\"BFG\":0,\"DEATHS\":8,\"PM\":0,\"GT_A\":0,\"GT\":0,\"MIN\":300,\"PG\":0,\"RG\":0,\"PLAYER_NICK\":\"Thanatus\",\"CG_A\":0,\"GL\":0,\"DEFENDS\":2,\"PLAYER_COUNTRY\":\"LT\",\"ACCURACY\":13,\"SG_A\":0,\"RL_A\":50,\"TEAM\":\"Red\",\"TEAM_RANK\":5,\"PLAYER_ID\":2432720,\"LG_A\":0,\"KILLS\":4,\"ASSISTS\":0,\"CG\":0,\"NG\":0,\"RANK\":10,\"BFG_A\":0,\"GL_A\":0,\"PM_A\":0,\"PLAYER_MODEL\":\"visor_bright\",\"RL\":0,\"CAPTURES\":0,\"PG_A\":8,\"SCORE\":139,\"MG_A\":13,\"RG_A\":80,\"SG\":0,\"LG\":0},{\"MG\":0,\"BFG\":0,\"NG_A\":0,\"DEATHS\":7,\"PM\":0,\"GT_A\":0,\"GT\":0,\"PLAYER_NICK\":\"kodummuoturturm\",\"RG\":0,\"PG\":0,\"MIN\":183,\"CG_A\":0,\"GL\":0,\"DEFENDS\":1,\"PLAYER_COUNTRY\":\"TR\",\"ACCURACY\":8,\"SG_A\":0,\"RL_A\":23,\"TEAM\":\"Red\",\"TEAM_RANK\":6,\"PLAYER_ID\":1861505,\"LG_A\":0,\"KILLS\":1,\"ASSISTS\":0,\"CG\":0,\"NG\":0,\"RANK\":11,\"PM_A\":0,\"GL_A\":0,\"BFG_A\":0,\"PLAYER_MODEL\":\"orbb_default\",\"PG_A\":1,\"CAPTURES\":0,\"RL\":0,\"MG_A\":11,\"SCORE\":89,\"SG\":0,\"RG_A\":0,\"LG\":0},{\"MG\":0,\"NG_A\":0,\"BFG\":0,\"DEATHS\":10,\"PM\":0,\"GT_A\":0,\"GT\":0,\"PLAYER_NICK\":\"QUITTERS\",\"RG\":0,\"MIN\":285,\"PG\":0,\"CG_A\":0,\"GL\":0,\"DEFENDS\":2,\"ACCURACY\":\"N/A\",\"SG_A\":50,\"RL_A\":20,\"TEAM_RANK\":\"Q\",\"PLAYER_ID\":0,\"LG_A\":0,\"KILLS\":2,\"ASSISTS\":0,\"CG\":0,\"NG\":0,\"RANK\":\"Q\",\"GL_A\":0,\"BFG_A\":0,\"PM_A\":0,\"RL\":0,\"CAPTURES\":0,\"PG_A\":5,\"SCORE\":92,\"MG_A\":14,\"RG_A\":20,\"SG\":0,\"LG\":0}],\"MOST_CAPTURES\":{\"PLAYER_NICK\":\"LS1942\",\"PLAYER_TEAM\":\"Blue\",\"PLAYER_ID\":1840680,\"PLAYER_MODEL\":\"klesk_flisk\",\"PLAYER_COUNTRY\":\"PL\",\"NUM\":5},\"LEAST_DEATHS\":{\"PLAYER_NICK\":\"acuratebob\",\"PLAYER_TEAM\":\"Blue\",\"PLAYER_ID\":2378331,\"PLAYER_MODEL\":\"razor_id\",\"PLAYER_COUNTRY\":\"GB\",\"NUM\":1},\"MOST_ASSISTS\":{\"PLAYER_NICK\":\"terraNivium\",\"PLAYER_TEAM\":\"Red\",\"PLAYER_ID\":1531394,\"PLAYER_MODEL\":\"sarge_default\",\"PLAYER_COUNTRY\":\"GB\",\"NUM\":3},\"MOST_DEFENDS\":{\"PLAYER_TEAM\":\"Blue\",\"PLAYER_NICK\":\"Legend4ry\",\"PLAYER_ID\":1836336,\"PLAYER_MODEL\":\"keel_sport\",\"PLAYER_COUNTRY\":\"GB\",\"NUM\":12},\"MAP_NAME\":\"Cobalt Station\",\"TEAM_SCOREBOARD\":[{\"MG\":0,\"NG_A\":0,\"BFG\":0,\"DEATHS\":48,\"PM\":0,\"GT_A\":0,\"GT\":0,\"PG\":0,\"RG\":0,\"MIN\":2117,\"CG_A\":0,\"GL\":0,\"DEFENDS\":41,\"ACCURACY\":18.7,\"SG_A\":39,\"RL_A\":31,\"TEAM\":\"Blue\",\"LG_A\":0,\"KILLS\":68,\"ASSISTS\":8,\"CG\":0,\"NG\":0,\"PM_A\":0,\"BFG_A\":0,\"GL_A\":0,\"CAPTURES\":8,\"PG_A\":7,\"RL\":0,\"MG_A\":16,\"SCORE\":2643,\"RG_A\":31,\"SG\":0,\"LG\":0},{\"MG\":0,\"BFG\":0,\"NG_A\":0,\"DEATHS\":75,\"PM\":0,\"GT_A\":0,\"GT\":0,\"MIN\":2325,\"RG\":0,\"PG\":0,\"CG_A\":0,\"GL\":0,\"DEFENDS\":27,\"ACCURACY\":13.4,\"SG_A\":30,\"RL_A\":27,\"TEAM\":\"Red\",\"LG_A\":0,\"KILLS\":39,\"ASSISTS\":6,\"CG\":0,\"NG\":0,\"PM_A\":0,\"BFG_A\":0,\"GL_A\":0,\"RL\":0,\"PG_A\":6,\"CAPTURES\":6,\"SCORE\":1961,\"MG_A\":13,\"SG\":0,\"RG_A\":20,\"LG\":0}],\"TOTAL_DEFENDS\":68,\"MAP_NAME_SHORT\":\"qzdm16\",\"GAME_TIMESTAMP\":\"03/12/2009 3:49 AM\",\"WINNING_TEAM\":\"Blue\",\"TOTAL_ASSISTS\":14,\"GAME_TYPE\":\"CTF\",\"PUBLIC_ID\":5793181,\"GAME_TIMESTAMP_NICE\":\"21 days\",\"GAME_LENGTH_NICE\":\"8.0 minutes\",\"GAME_EXPIRES_FULL\":\"04/08/2009 3:49 AM\"}";

    @Test
    public void testReadData() throws ReaderException {
        
        JSONReader reader = new JSONReader();
        ServerInfo serverInfo = new ServerInfo ();
        
        reader.readData(serverInfo, responseCTF.getBytes());
        
        assertNotNull(serverInfo.getJson());
    }
}
